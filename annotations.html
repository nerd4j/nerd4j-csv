
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at Sep 15, 2015
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Annotations | NERD4J-CSV</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/spacelab/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-annotations project-nerd4j-csv" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="https://github.com/nerd4j/nerd4j-csv">NERD4J-CSV</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="index.html" title="Overview">Overview</a></li>
							<li ><a href="project-info.html" title="Project Info">Project Info</a></li>
							<li ><a href="download.html" title="Download">Download</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="quickstart.html" title="Quick Start">Quick Start</a></li>
									<li class="active"><a href="" title="Annotations">Annotations</a></li>
									<li ><a href="xmlconfig.html" title="XML Configuration">XML Configuration</a></li>
									<li ><a href="databinding.html" title="Other data models">Other data models</a></li>
									<li ><a href="java-stream-api.html" title="Java 8 stream API">Java 8 stream API</a></li>
									<li ><a href="spring.html" title="Spring integration">Spring integration</a></li>
									<li ><a href="apidocs/index.html" title="See JavaDocs">See JavaDocs</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<div id="bannerLeft"><h1>NERD4J-CSV</h1></div>
					<p class="lead">So far this is the quickest, easiest and most configurable open source Java framework for CSV manipulation.</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#aCSVColumn_in_detail" title="@CSVColumn in detail">@CSVColumn in detail</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#aCSVReader_in_detail" title="@CSVReader in detail">@CSVReader in detail</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<p>In this section we will take a deeper look at the nerd4j-csv annotations.</p> 
<div class="section"> 
 <div class="page-header">
  <h2 id="aCSVColumn_in_detail">@CSVColumn in detail</h2>
 </div> 
 <p>So far we wrote a code able to read and write a CSV in the form:</p> 
 <p>&nbsp;&nbsp;<tt>name, age</tt><br /><tt>-----,-----</tt><br />&nbsp;<tt>name1, age1</tt><br />&nbsp;<tt>name2, age2</tt><br /> </p> 
 <p>But what if we need to read from an existing CSV file whose header is in the form: <b>user_name, user_age</b>?<br />No panic, we can add the actual column name as follows:</p> 
 <div class="source"> 
  <pre>  @CSVColumn(name=&quot;user_name&quot;)
  public String getName()
  ...

  @CSVColumn(name=&quot;user_age&quot;)
  public Integer getAge()
  ...
</pre> 
 </div> 
 <p>And everything works fine.<br />The <tt>@CSVColumn</tt> comes with other arguments that we are going to explain. Lets expand a little bit our model, suppose we have the following columns in our CSV:</p> 
 <ul> 
  <li>user_name: String.</li> 
  <li>user_age: Integer.</li> 
  <li>registration: Date (in the format dd-MM-yyyy).</li> 
  <li>user_type: Enum ( PRIVATE, PUBLIC ).</li> 
  <li>password: String (only for PRIVATE users).</li> 
 </ul> 
 <p>First of all we will create our enum:</p> 
 <div class="source"> 
  <pre>  public enum UserType
  {
    PRIVATE, PUBLIC;
  }
</pre> 
 </div> 
 <p>then we will add the related field in our <tt>Model</tt></p> 
 <div class="source"> 
  <pre>  ...
  private UserType type;
  ...
  @CSVColumn(name=&quot;user_type&quot;)
  public UserType getType()
  {
    return type;
  }
  public void setType( UserType type )
  {
    this.type = type;
  }
</pre> 
 </div> 
 <p>If the user is of type PRIVATE it owns a password, otherwise not. So the field password is optional depending on the user type. To avoid validation errors we will set the <tt>optional</tt> flag to <tt>true</tt> in the <tt>password</tt> field declaration.</p> 
 <div class="source"> 
  <pre>  ...
  private String password;
  ...
  @CSVColumn(optional=true)
  public String getPassword()
  {
    return password;
  }
  public void setPassword( String password )
  {
    this.password = password;
  }
</pre> 
 </div> 
 <p>Now we will go deeper into the configuration and will figure out how the CSV mapping works. A <tt>CSVReader</tt> is made of a <tt>CSVParser</tt> and a <tt>CSVToModelBinder</tt>. The first reads the CSV file and produces a stream of tokens, one for each field. The second gets a token and a mapping configuration and uses the appropriate <tt>CSVFieldProcessor</tt> to validate and convert the given <tt>String</tt> token into the data format required by the final data model. The nerd4j-csv comes with a set of preconfigured <tt>CSVFieldProcessor</tt> that covers all common model mappings, but sometimes can be necessary to change the default configurations or also register custom processors.</p> 
 <p>In this case we need to map a <tt>Date</tt> field. The default processor handles dates in the standard java date format but our CSV uses a custom pattern. Therefore we need to define an explicit <tt>readProcessor</tt> configured with the wanted pattern. The <tt>@CSVFieldProcessor</tt> annotation has three fileds:</p> 
 <ol style="list-style-type: decimal"> 
  <li>A precondition validator that checks that some conditions hold before converting the field (ie. the field counts more than 10 characters).</li> 
  <li>A <tt>String</tt> to custom data converter, in this case a <tt>String</tt> to <tt>Date</tt> converter.</li> 
  <li>A postcondition validator that checks that some conditions hold after converting the field (ie. the value of a numeric field must be greater than 0).</li> 
 </ol> 
 <p>In our case we just need to customize the converter configuration so we proceed as follows:</p> 
 <div class="source"> 
  <pre>  ...
  private Date registration;
  ...
  @CSVColumn(
    readProcessor=@CSVFieldProcessor(
      converter=@CSVFieldConverter(
        type=&quot;parseDate&quot;,
        params=@CSVParam(type=&quot;pattern&quot;,value=&quot;dd-MM-yyyy&quot;)
      )
    )
  )
  public Date getRegistration()
  {
    return registration;
  }
  public void setRegistration( Date registration )
  {
    this.registration = registration;
  }
</pre> 
 </div> 
 <p>If we want to write the <tt>Date</tt> field using the same pattern we need to overwrite also the <tt>writeProcessor</tt> in the same way, but in this case we will use <tt>formatDate</tt> instead of <tt>parseDate</tt>.<br />The nerd4j-csv framework comes with the following preconfigured CSV to model converters:</p> 
 <ul> 
  <li><b>parseByte</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseShort</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseLong</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseFloat</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseDouble</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseBigInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseBigDecimal</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseAtomicInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseAtomicLong</b>: with the following parameters 
   <ul> 
    <li>pattern = the number parse pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseBoolean</b>: with no parameters</li> 
  <li><b>parseDate</b>: with the following parameters 
   <ul> 
    <li>pattern = the date format pattern (mandatory)</li> 
    <li>time-zone = input date timezone (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>parseEnum</b>: with the following parameter 
   <ul> 
    <li>enum-type = the fully qualified enum class name (mandatory)</li> 
   </ul></li> 
 </ul> 
 <p>At the same way it comes with the following preconfigured model to CSV converters:</p> 
 <ul> 
  <li><b>formatByte</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatShort</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatLong</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatFloat</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatDouble</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatBigInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatBigDecimal</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatAtomicInteger</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatAtomicLong</b>: with the following parameters 
   <ul> 
    <li>pattern = the number format pattern (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatBoolean</b>: with no parameters</li> 
  <li><b>formatDate</b>: with the following parameters 
   <ul> 
    <li>pattern = the date format pattern (mandatory)</li> 
    <li>time-zone = output date timezone (optional)</li> 
    <li>locale = the pattern locale for symbols (optional)</li> 
   </ul></li> 
  <li><b>formatEnum</b>: with the following parameter 
   <ul> 
    <li>enum-type = the fully qualified enum class name (mandatory)</li> 
   </ul></li> 
 </ul> 
 <p>Finally it comes with the following validators:</p> 
 <ul> 
  <li><b>checkStringLength</b>: length = the actual length of the string (mandatory)</li> 
  <li><b>checkStringLength</b>: min, max = the minimum and maximum length of the string (mandatory)</li> 
  <li><b>checkRegEx</b>: pattern = the regular expression pattern to match (mandatory)</li> 
  <li><b>checkByteRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkShortRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkIntegerRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkLongRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkFloatRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkDoubleRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkBigIntegerRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
  <li><b>checkBigDecimalRange</b>: min, max = the minimum and maximum value (at least one mandatory)</li> 
 </ul> 
 <p>In both case of converters and validators its up to the developer to ensure that the right processor is configured for handling the actual data type.</p>
 <h3>Order</h3>
 <p>The <tt>CSVColumn</tt> annotation comes also with an attribute called <tt>order</tt>. This is used only by the <tt>CSVWriter</tt> and tells the order in which the columns should be written.<br /> If two or more columns have the same order value the framework chooses the related order depending on the implementation.</p>
</div> 
<div class="section"> 
 <h2 id="aCSVReader_in_detail">@CSVReader in detail</h2> 
 <p>By default the framework reads and writes CSV files according to the RFC 4180 specification. So it expects the file to use the <b>comma</b> as field separation character, the <b>double quote</b> as quoting character and <b>CRLF</b> as line terminator. But what if we get a CSV file generated by MS Excel that uses the <b>semicolon</b> as field separator instead of the <b>comma</b>?<br />No problem, we can define a custom CSV parser to be used by the <tt>CSVReader</tt>.We just need to add the following property to the <tt>@CSVReader</tt> annotation:</p> 
 <div class="source"> 
  <pre>  @CSVReader(
    parser=@CSVParser(
      fieldSep=';',quote='&quot;',recordSep={'\r','\n'}
    )
  )
</pre> 
 </div> 
 <p>The <tt>@CSVParser</tt> annotation provides also the following fields:</p> 
 <ul> 
  <li>strictQuotes: default false, if set to true tells the framework to handle CSV quotes strictly. Non escaped quoting characters found inside a quoted field will force the parser to fail with a <tt>MalformedCSVException</tt>.</li> 
  <li>escape: default empty, sets the character to be used to escape control characters (not CSV standard).</li> 
  <li>charsToIgnore: default empty, tells the parser a set of characters to be ignored during parsing.</li> 
 </ul> 
 <p>charsToIgnoreAroundFields: default <tt>{' ', '\t', '\n'}</tt>, tells the parser a set of characters to be ignored if found before and after the content of a field.</p> 
 <p>The <tt>@CSVReader</tt> annotation provides also the following properties:</p> 
 <ul> 
  <li>readHeader: default true, tells to handle the first row of the CSV source as an header.</li> 
  <li>useColumnNames: default true, if readHeader is true tells to use the column names found in the header to perform the mapping between CSV columns and the data model.</li> 
  <li>acceptIncompleteRecords: default false, tells that the reader must not fail if the records in the CSV source are not all of the same length. By default the reader fails with a <tt>MalformedCSVException</tt>.</li> 
 </ul> 
 <p>At the same way we can write non standard CSV files configuring a custom <tt>CSVFormatter</tt> to the related <tt>CSVWriter</tt>. For example we can use the following annotation: </p> 
 <div class="source"> 
  <pre>  @CSVWriter(  
    formatter=@CSVFormatter(  
      fieldSep=';',quote='&quot;',recordSep={'\r','\n'}
    )
  )
</pre> 
 </div> 
 <p>The <tt>@CSVFormatter</tt> annotation provides also the following fields:</p> 
 <ul> 
  <li>escape: default empty, sets the character to be used to escape control characters (not CSV standard).</li> 
  <li>charsToEscape: default empty, if <tt>escape</tt> is true, tells the formatter to escape (using the configured escape character) the given set of characters.</li> 
  <li>charsThatForceQuoting: default <tt>{' ', ',', '\t', '\n'}</tt>, tells the formatter to force the quotation of the field if it contains one ore more characters in this set.</li> 
 </ul> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="quickstart.html" title="Quick Start">Quick Start</a>
						</li>
						<li class="active">
							<a href="#" title="Annotations">Annotations</a>
						</li>
						<li >
							<a href="xmlconfig.html" title="XML Configuration">XML Configuration</a>
						</li>
						<li >
							<a href="databinding.html" title="Other data models">Other data models</a>
						</li>
                        <li >
							<a href="java-stream-api.html" title="Java 8 stream API">Java 8 stream API</a>
						</li>
						<li >
							<a href="spring.html" title="Spring integration">Spring integration</a>
						</li>
						<li >
							<a href="apidocs/index.html" title="See JavaDocs">See JavaDocs</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><a href="http://www.java.net"><img src="http://www.java.net/sites/default/files/51226_thumb_Java.net_Member_clr.gif.jpg" alt="Java.net Member"></a></blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2013-2015 <a href="http://nerd4j.org">Nerd4j</a>. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
